{% set recurringOrders = craft.recurringOrders %}
{% set settings = recurringOrders.settings %}

{# TODO: Make this configurable. #}
{% set showRecurringOrderControls = (order.parentOrderId) %}

<style>

    #recurringOrders_derivedOrders,
    #recurringOrders_orderControls,
    #recurringOrders_generatedRecurrences {
        margin-top: 1em;
        margin-bottom: 3em;
    }

    #recurring-orders-derived-orders-vue-admin-table {
        margin-top: 1em;
        padding: 24px;
    }

</style>



{% set derivedOrders = order.findDerivedOrders().all() %}

{% if derivedOrders | length %}

{# TODO: Make this configurable. #}
{% set showRecurringOrderControls = false %}

<div id="recurringOrders_derivedOrders">

    <h3 class="order-title">
        {{ recurringOrders.t("Derived Orders") }}
    </h3>

    {% include 'recurring-orders/cp/_includes/_derivedOrdersTable' %}

</div>

{% endif %}



{% if showRecurringOrderControls %}

<div id="recurringOrders_orderControls">

    {% include 'recurring-orders/cp/_includes/_orderControls' %}

</div>

{% endif %}



{% if order.hasRecurrenceStatus %}

<div id="recurringOrders_generatedRecurrences">

    <h3 class="order-title" style="margin-top: 3em;">
        {# TODO: Translate. #}
        Generated Recurrences
    </h3>

    {% include 'recurring-orders/cp/_includes/_generatedOrdersTable' %}

</div>

{% endif %}


{# TODO: (Probably shouldn't show Recurrence controls on Generated Orders unless they are already recurring...?) #}
